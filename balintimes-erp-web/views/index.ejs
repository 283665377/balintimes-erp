<!DOCTYPE html>
<html ng-app="app">
<head>
    <title><%= title %></title>

    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap-theme.min.css"/>
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.js"></script>

    <script type="text/javascript" src="/bower_components/angularjs/angular.js"></script>

</head>
<body>
<h1><%= title %></h1>

<p>Welcome to <%= title %></p>

<div ng-controller="myCtrl">
    <button class="btn btn-primary" ng-click="bmmClick()">Bmms</button>
    <button class="btn btn-primary" ng-click="crmClick()">Crm</button>
    <br>
    <input type="text" class="form-control col-md-2" ng-model="vm.Msg">
    <button class="btn btn-primary" ng-click="PostBmm()">Bmms</button>
    <button class="btn btn-primary" ng-click="PostCrm()">Crm</button>
</div>
<script>
    var app = angular.module("app", []);

    app.config(['$httpProvider', function ($httpProvider) {
        $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
        $httpProvider.defaults.headers.put['Content-Type'] = 'application/x-www-form-urlencoded';
        $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';

        $httpProvider.defaults.transformRequest = [function (data) {
            if (data) {
                return $.param(data);
            }
            return data;
        }];
    }]);

    app.controller("myCtrl", function ($scope, $http) {
        var vm = $scope.vm = {
            Msg: ''
        };
        $scope.bmmClick = function () {
            $http.get("bmms/home/erpname").then(function (res) {
                alert(res.data);
                console.info(res.data);
            });
        };
        $scope.crmClick = function () {
            $http.get("crm/home/erpname").then(function (res) {
                alert(res.data);
                console.info(res.data);
            });
        };

        $scope.PostBmm = function () {
            $http.post("bmms/home/erpmsg", {Msg: vm.Msg}).then(function (res) {
                alert(res.data);
                console.info(res.data);
            });
        };
        $scope.PostCrm = function () {
            $http.post("crm/home/erpmsg", {Msg: vm.Msg}).then(function (res) {
                alert(res.data);
                console.info(res.data);
            });
        };
    });
</script>
</body>
</html>
